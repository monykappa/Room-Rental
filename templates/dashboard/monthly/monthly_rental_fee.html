    {% extends 'base.html' %}
    {% load static %}


    {% block title %}
    Monthly Rental Fee
    {% endblock title %}

    {% block css %}
    <link rel="stylesheet" href="{% static 'css/dashboard/monthly/monthly_rental_fee.css' %}">
    {% endblock css %}

    {% block content %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

    <div class="monthly-rental-ctn">

        <h1>Monthly rental fee</h1>
        <div class="top-table-ctn">
            <div class="btn-ctn">
                <a href="{% url 'dashboard:add_monthly_fee' %}" class="btn btn-success btn-add">Add monthly fee</a>
            </div>
            <form method="get" action="{% url 'dashboard:monthly_fee' %}">
                {{ form.as_p }}
                <button type="submit" class="btn btn-primary btn-filter">Filter</button>
                <a href="{% url 'dashboard:monthly_fee' %}" class="btn btn-danger btn-reset">Reset Filter</a>
            </form>
            

        </div>

        <table id="data-table">
            <thead>
                <tr>
                    <th>Room No</th>
                    <th>House Owner</th>
                    <th>Date</th>
                    <th>Current water m続</th>
                    <th>Previous water m続</th>
                    <th>Water Fee</th>
                    <th>Room fee</th>
                    <th>Trash Fee</th>
                    <th>Park Fee</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                {% for monthly_fee in monthly_fees %}
                <tr>
                    <td>{{ monthly_fee.room.RoomNo }}</td>
                    <td> {{ monthly_fee.room.HouseOwner }}</td>
                    <td>{{ monthly_fee.date }}</td>
                    <td>{{ monthly_fee.current_water }} m続</td>
                    <td>{{ monthly_fee.previous_water }} m続</td>
                    <td>${{ monthly_fee.water_fee|stringformat:"g" }}</td>
                    <td>${{ monthly_fee.room.RoomFee|stringformat:"g" }}</td>
                    <td>${{ monthly_fee.trash_fee|stringformat:"g" }}</td>
                    <td>${{ monthly_fee.park_fee|stringformat:"g" }}</td>
                    <td>${{ monthly_fee.total|stringformat:"g" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <a href=" {%url 'dashboard:export_pdf' %} " class="btn btn-success">Export to PDF</a>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.js"></script>


    <!-- <script>
        $(document).ready(function () {
            $("#export-pdf").on("click", function () {
                // Select the table content
                var element = document.getElementById('data-table');
    
                // Set the options for html2pdf
                var opt = {
                    margin:       10,
                    filename:     'monthly_rental_fee.pdf',
                    image:        { type: 'jpeg', quality: 0.98 },
                    html2canvas:  { scale: 2 },
                    jsPDF:         { unit: 'mm', format: 'a4', orientation: 'portrait' }
                };
    
                // Use html2pdf to generate the PDF
                html2pdf().from(element).set(opt).outputPdf(function(pdf) {
                    var blob = new Blob([pdf], { type: 'application/pdf' });
                    var link = document.createElement('a');
                    link.href = window.URL.createObjectURL(blob);
                    link.download = 'monthly_rental_fee.pdf';
                    link.click();
                });
            });
        });
    </script> -->

    {% endblock content %}